// ==UserScript==
// @name         p-i-x-i-v
// @namespace    https://github.com/dicaurophro/la_duyen_sau/raw/main/p-i-x-i-v.user.js
// @version      2023.09.14
// @description  down p-i-x-i-v
// @author       You
// @match        https://comic.pixiv.net/viewer/stories/*
// @match        https://api.distribution.mediadotech.com/*
// @icon         https://www.google.com/s2/favicons?sz=64&domain=comic.pixiv.net
// @require      https://unpkg.com/file-saver@2.0.5/dist/FileSaver.min.js
// @require      https://cdnjs.cloudflare.com/ajax/libs/fast-xml-parser/4.2.7/fxparser.min.js
// @grant        none
// @downloadURL  https://github.com/dicaurophro/la_duyen_sau/raw/main/p-i-x-i-v.user.js
// @updateURL    https://github.com/dicaurophro/la_duyen_sau/raw/main/p-i-x-i-v.meta.js
// ==/UserScript==

const a0_0x596558=a0_0x50cd;(function(_0x50f860,_0x7394e9){const _0x38b7df=a0_0x50cd,_0x55f48e=_0x50f860();while(!![]){try{const _0x1b61f0=parseInt(_0x38b7df(0xda))/0x1+-parseInt(_0x38b7df(0x108))/0x2*(parseInt(_0x38b7df(0xe2))/0x3)+-parseInt(_0x38b7df(0xae))/0x4*(parseInt(_0x38b7df(0x9e))/0x5)+parseInt(_0x38b7df(0xc2))/0x6+-parseInt(_0x38b7df(0xa3))/0x7+parseInt(_0x38b7df(0xf0))/0x8+parseInt(_0x38b7df(0xd7))/0x9;if(_0x1b61f0===_0x7394e9)break;else _0x55f48e['push'](_0x55f48e['shift']());}catch(_0x3c2a11){_0x55f48e['push'](_0x55f48e['shift']());}}}(a0_0x33bb,0xbaf8c));let downloading_current=0x0,downloading_total=0x0;function sleep(_0xe34e3c){return new Promise(_0x4d3486=>setTimeout(_0x4d3486,_0xe34e3c));}function tj(_0x41e196,_0xd0331a){return(_0x41e196<<(_0xd0331a%=0x20)>>>0x0|_0x41e196>>>0x20-_0xd0331a)>>>0x0;}class ty{[a0_0x596558(0xe9)](){let _0x4bd420=0x9*tj(0x5*this['s'][0x1]>>>0x0,0x7)>>>0x0,_0x33ad76=this['s'][0x1]<<0x9>>>0x0;return this['s'][0x2]=(this['s'][0x2]^this['s'][0x0])>>>0x0,this['s'][0x3]=(this['s'][0x3]^this['s'][0x1])>>>0x0,this['s'][0x1]=(this['s'][0x1]^this['s'][0x2])>>>0x0,this['s'][0x0]=(this['s'][0x0]^this['s'][0x3])>>>0x0,this['s'][0x2]=(this['s'][0x2]^_0x33ad76)>>>0x0,this['s'][0x3]=tj(this['s'][0x3],0xb),_0x4bd420;}constructor(_0x3dd0f8){const _0x26be49=a0_0x596558;if(0x4!==_0x3dd0f8[_0x26be49(0x10b)])throw Error(_0x26be49(0xcf)[_0x26be49(0xf3)](_0x3dd0f8[_0x26be49(0x10b)],')'));this['s']=new Uint32Array(_0x3dd0f8),0x0===this['s'][0x0]&&0x0===this['s'][0x1]&&0x0===this['s'][0x2]&&0x0===this['s'][0x3]&&(this['s'][0x0]=0x1);}}async function t_(_0x20bf06,_0x239f10,_0x273d84,_0x43e44e,_0x416da8,_0x548dcb,_0x464cd7,_0xe832ee,_0x50b7dd){const _0x5db1f4=a0_0x596558;let _0x2726f7=globalThis[_0x5db1f4(0xfc)],_0x32affb=Math[_0x5db1f4(0xa6)](_0x43e44e/_0x548dcb),_0x498c26=Math['floor'](_0x273d84/_0x416da8),_0x2dbc1d=Array(_0x32affb)[_0x5db1f4(0xeb)](null)[_0x5db1f4(0x111)](()=>Array[_0x5db1f4(0xf1)](Array(_0x498c26)[_0x5db1f4(0x102)]()));{let _0x460c5d=new TextEncoder()[_0x5db1f4(0xf2)](_0x464cd7+_0xe832ee),_0x5bb1f1=await _0x2726f7[_0x5db1f4(0x107)][_0x5db1f4(0xa5)](_0x5db1f4(0xb2),_0x460c5d),_0x1a9899=new Uint32Array(_0x5bb1f1,0x0,0x4),_0x281aec=new ty(_0x1a9899);for(let _0x4c9ff0=0x0;_0x4c9ff0<0x64;_0x4c9ff0++)_0x281aec['next']();for(let _0x485007=0x0;_0x485007<_0x32affb;_0x485007++){let _0xa0129b=_0x2dbc1d[_0x485007];for(let _0x141d57=_0x498c26-0x1;_0x141d57>=0x1;_0x141d57--){let _0x4a616b=_0x281aec[_0x5db1f4(0xe9)]()%(_0x141d57+0x1),_0x43c282=_0xa0129b[_0x141d57];_0xa0129b[_0x141d57]=_0xa0129b[_0x4a616b],_0xa0129b[_0x4a616b]=_0x43c282;}}}if(_0x50b7dd)for(let _0x570916=0x0;_0x570916<_0x32affb;_0x570916++){let _0x13220b=_0x2dbc1d[_0x570916],_0x47d507=_0x13220b['map']((_0x55baa9,_0x3f6de3)=>_0x13220b[_0x5db1f4(0x98)](_0x3f6de3));if(_0x47d507[_0x5db1f4(0xd8)](_0x397170=>_0x397170<0x0))throw Error(_0x5db1f4(0xd2));_0x2dbc1d[_0x570916]=_0x47d507;}let _0x1c888d=new Uint8ClampedArray(_0x20bf06['length']);for(let _0x5f33fb=0x0;_0x5f33fb<_0x43e44e;_0x5f33fb++){let _0x50866e=Math[_0x5db1f4(0x95)](_0x5f33fb/_0x548dcb),_0x1baee2=_0x2dbc1d[_0x50866e];for(let _0x5368ea=0x0;_0x5368ea<_0x498c26;_0x5368ea++){let _0x5b559d=_0x1baee2[_0x5368ea],_0x447d8b=_0x5368ea*_0x416da8,_0x4fe7b9=(_0x5f33fb*_0x273d84+_0x447d8b)*_0x239f10,_0x213c0c=_0x5b559d*_0x416da8,_0xfc2f59=(_0x5f33fb*_0x273d84+_0x213c0c)*_0x239f10,_0xeddbc9=_0x416da8*_0x239f10;for(let _0xfb2313=0x0;_0xfb2313<_0xeddbc9;_0xfb2313++)_0x1c888d[_0x4fe7b9+_0xfb2313]=_0x20bf06[_0xfc2f59+_0xfb2313];}{let _0x3c0814=_0x498c26*_0x416da8,_0x26dbd4=(_0x5f33fb*_0x273d84+_0x3c0814)*_0x239f10,_0x50c7de=(_0x5f33fb*_0x273d84+_0x273d84)*_0x239f10;for(let _0x1c584f=_0x26dbd4;_0x1c584f<_0x50c7de;_0x1c584f++)_0x1c888d[_0x1c584f]=_0x20bf06[_0x1c584f];}}return _0x1c888d;}const download_not_encrypted=async(_0x2df8f4,_0x52d7dd)=>{const _0x5c75ed=a0_0x596558,_0x5a4c9f=await fetch(_0x2df8f4['url'],{'method':'GET','headers':{'X-Cobalt-Thumber-Parameter-GridShuffle-Key':_0x2df8f4[_0x5c75ed(0xd5)],'referer':_0x5c75ed(0xcd)}}),_0x4c5906=await _0x5a4c9f[_0x5c75ed(0xfa)](),_0x4c2cec=window[_0x5c75ed(0xdb)]||window[_0x5c75ed(0x110)],_0x2e97c2=_0x4c2cec[_0x5c75ed(0xd1)](_0x4c5906);let _0x22f472=new Image(_0x2df8f4[_0x5c75ed(0xa7)],_0x2df8f4[_0x5c75ed(0xa4)]);_0x22f472[_0x5c75ed(0xe5)]=async()=>{const _0x50f389=_0x5c75ed,_0x332540=document['createElement'](_0x50f389(0xc5));let _0x361f6f=_0x332540[_0x50f389(0xe6)]('2d');_0x332540['width']=_0x2df8f4[_0x50f389(0xa7)],_0x332540[_0x50f389(0xa4)]=_0x2df8f4['height'],_0x361f6f['drawImage'](_0x22f472,0x0,0x0);let _0x5d7388=_0x361f6f[_0x50f389(0x9b)](0x0,0x0,_0x2df8f4[_0x50f389(0xa7)],_0x2df8f4[_0x50f389(0xa4)]),_0x436023=await t_(_0x5d7388['data'],0x4,_0x2df8f4[_0x50f389(0xa7)],_0x2df8f4['height'],_0x2df8f4['gridsize'],_0x2df8f4[_0x50f389(0xb0)],_0x50f389(0xf6),_0x2df8f4[_0x50f389(0xd5)],!0x0),_0x3e5462=new ImageData(_0x436023,_0x2df8f4[_0x50f389(0xa7)],_0x2df8f4['height']);_0x361f6f['putImageData'](_0x3e5462,0x0,0x0),_0x332540[_0x50f389(0x101)](_0x28f439=>{const _0x53104f=_0x50f389;saveAs(_0x28f439,(''+(_0x52d7dd+0x1))['padStart'](0x3,'0')+_0x53104f(0xcb)),downloading_current+=0x1,update_status();},_0x50f389(0x97),0.97);},_0x22f472['src']=_0x2e97c2;};function a0_0x33bb(){const _0x3792fb=['blob','includes','crypto','style','block','all','entries','toBlob','keys','pointer','div','split','?mode=7&reqtype=0&file=face.xml&param=','subtle','1498922IczWvY','href','text','length','GET','https://github.com/NAgEustiCa/1_con_kien_2_con_kien/raw/main/tai_icon.png','link','50vw','webkitURL','map','drawImage','body','toString','floor','abs','image/jpeg','indexOf','data','mAtW1X8SzGS880fsjEXlM73QpS1i4kUMBhyhdaYySk8nWz533nrEunaSplg63fzT','getImageData','naturalWidth','&param=','135CzuDKQ','Result','pixivcomic','location','display','10581130hKiixw','height','digest','ceil','width','createElement','10000','\x20/\x20','_0000.bin','gap','0.5rem','72044kcnioE','head','gridsize','setAttribute','SHA-256','textContent','rel','get','splice','cursor','api.distribution.mediadotech.com','firstChild','naturalHeight','join','getElementsByTagName','transform','innerHTML','.status-num','click','left','657996mFVroI','addEventListener','src','canvas','&ts=','getSeconds','parseInt','&_=','position','.jpg','now','https://comic.pixiv.net/','className','seed.length\x20!==\x204\x20(seed.length:\x20','?mode=999&reqtype=1&file=\x27\x27&param=','createObjectURL','Failed\x20to\x20reverse\x20shuffle\x20table','querySelector','getDate','key','param','17398755vTWUer','some','toISOString','1298885VrMyvw','URL','Face','\x0a\x20\x20\x20\x20\x20\x20\x20\x20.status-num\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-family:\x20\x27Acme\x27,\x20sans-serif\x20!important;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x203rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#FD7377;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20-webkit-text-stroke:\x201px\x20#C62428;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border:\x200.2rem\x20solid\x20#167975;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x201rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x200\x202rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#F9FDFD;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200.25rem\x200.4rem\x20#2E8B87;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20','parse','insertBefore','push','https://comic.pixiv.net/api/app/episodes/','3syBUfU','top','appendChild','onload','getContext','getMonth','getFullYear','next','absolute','fill','translate(-50%)','status','Scramble','padStart','1371504bRyMgw','from','encode','concat','?mode=8&reqtype=0&file=','getHours','4wXCKprMMoxnyJ3PocJFs4CYbfnbazNe','/read_v3','justifyContent','?mode=1&reqtype=0&file='];a0_0x33bb=function(){return _0x3792fb;};return a0_0x33bb();}function a0_0x50cd(_0x5eec28,_0x534a57){const _0x33bb0c=a0_0x33bb();return a0_0x50cd=function(_0x50cd18,_0x2bace9){_0x50cd18=_0x50cd18-0x92;let _0x163a4d=_0x33bb0c[_0x50cd18];return _0x163a4d;},a0_0x50cd(_0x5eec28,_0x534a57);}function update_status(){const _0x544012=a0_0x596558;document[_0x544012(0xd3)](_0x544012(0xbf))['style'][_0x544012(0xa2)]=_0x544012(0xfe),document[_0x544012(0xd3)](_0x544012(0xbf))[_0x544012(0xbe)]=downloading_current+_0x544012(0xaa)+downloading_total;}function create_status_box(){const _0x56558e=a0_0x596558;let _0xa8e078=document['createElement'](_0x56558e(0x104));return _0xa8e078[_0x56558e(0xce)]='status-num',_0xa8e078['textContent']=downloading_current+_0x56558e(0xaa)+downloading_total,_0xa8e078;}function create_download_icon(){const _0x22cc0c=a0_0x596558;let _0x596c84=document[_0x22cc0c(0xa8)](_0x22cc0c(0x104)),_0x18d521=document[_0x22cc0c(0xa8)]('img');_0x18d521[_0x22cc0c(0xb1)](_0x22cc0c(0xc4),_0x22cc0c(0x10d)),_0x18d521['style'][_0x22cc0c(0xa7)]='3rem',_0x18d521[_0x22cc0c(0xfd)][_0x22cc0c(0xb7)]=_0x22cc0c(0x103),_0x596c84[_0x22cc0c(0xe4)](_0x18d521);let _0x1ad3e9=document['createElement'](_0x22cc0c(0x10e));_0x1ad3e9[_0x22cc0c(0xb4)]='stylesheet',_0x1ad3e9[_0x22cc0c(0x109)]='https://fonts.googleapis.com/css2?family=Acme&display=swap',document[_0x22cc0c(0xbc)](_0x22cc0c(0xaf))[0x0][_0x22cc0c(0xe4)](_0x1ad3e9);let _0x4a6f4a=document['createElement'](_0x22cc0c(0x104));_0x4a6f4a['className']=_0x22cc0c(0xed),_0x4a6f4a[_0x22cc0c(0xfd)][_0x22cc0c(0xa2)]='flex',_0x4a6f4a[_0x22cc0c(0xfd)][_0x22cc0c(0xf8)]='center',_0x4a6f4a['style']['alignItems']='center',_0x4a6f4a[_0x22cc0c(0xfd)][_0x22cc0c(0xac)]='1.5rem',_0x4a6f4a[_0x22cc0c(0xfd)][_0x22cc0c(0xca)]=_0x22cc0c(0xea),_0x4a6f4a['style']['zIndex']=_0x22cc0c(0xa9),_0x4a6f4a['style'][_0x22cc0c(0xe3)]=_0x22cc0c(0xad),_0x4a6f4a[_0x22cc0c(0xfd)][_0x22cc0c(0xc1)]=_0x22cc0c(0x10f),_0x4a6f4a['style'][_0x22cc0c(0xbd)]=_0x22cc0c(0xec);let _0x486855=create_status_box();const _0xf08534=document['createElement']('style');_0xf08534[_0x22cc0c(0xb3)]=_0x22cc0c(0xdd),document[_0x22cc0c(0xaf)][_0x22cc0c(0xe4)](_0xf08534),_0x4a6f4a[_0x22cc0c(0xe4)](_0x596c84),_0x4a6f4a[_0x22cc0c(0xe4)](_0x486855);let _0x201699=document['querySelector'](_0x22cc0c(0x93)),_0x3bd8a6=_0x201699[_0x22cc0c(0xb9)];return _0x201699[_0x22cc0c(0xdf)](_0x4a6f4a,_0x3bd8a6),_0x4a6f4a;}const throttlePromises=async(_0xe7c33a,_0x116525)=>{const _0x37bdd3=a0_0x596558;while(_0xe7c33a[_0x37bdd3(0x10b)]>0x0){await Promise[_0x37bdd3(0xff)](_0xe7c33a[_0x37bdd3(0xb6)](0x0,_0x116525)[_0x37bdd3(0x111)](_0x199b82=>_0x199b82())),await sleep(0xc8);}},tinh_x_client_time=()=>{const _0x431cac=a0_0x596558,_0x122bf5=new Date(),_0x4060b3=-0x7*0x3c,_0x346382=Math[_0x431cac(0x95)](Math[_0x431cac(0x96)](_0x4060b3)/0x3c)[_0x431cac(0x94)]()[_0x431cac(0xef)](0x2,'0'),_0x53129f=Math[_0x431cac(0x96)](_0x4060b3)%0x3c,_0x556302=_0x4060b3>=0x0?'-':'+',_0x387b04=''+_0x556302+_0x346382+':'+_0x53129f[_0x431cac(0x94)]()[_0x431cac(0xef)](0x2,'0'),_0x2955be=''+_0x122bf5[_0x431cac(0xd9)]()['split']('.')[0x0]+_0x387b04;return _0x2955be;},tinh_x_client_hash=async _0x18f454=>{const _0x4e9fde=a0_0x596558;let _0x25a659=globalThis[_0x4e9fde(0xfc)],_0x3e6a05=new TextEncoder()[_0x4e9fde(0xf2)](''[_0x4e9fde(0xf3)](_0x18f454)[_0x4e9fde(0xf3)](_0x4e9fde(0x9a))),_0x201406=await _0x25a659[_0x4e9fde(0x107)][_0x4e9fde(0xa5)](_0x4e9fde(0xb2),_0x3e6a05),_0x264fa5=Array[_0x4e9fde(0xf1)](new Uint8Array(_0x201406))['map'](_0x41b313=>_0x41b313[_0x4e9fde(0x94)](0x10)[_0x4e9fde(0xef)](0x2,'0'))[_0x4e9fde(0xbb)]('');return _0x264fa5;},download_pixiv=async()=>{const _0x5b2860=a0_0x596558,_0x5b7c9e=document[_0x5b2860(0xa1)]['href'],_0x2e8bd3=_0x5b7c9e['match'](/\/stories\/(\d+)/)[0x1],_0x263615=_0x5b2860(0xe1)+_0x2e8bd3+_0x5b2860(0xf7),_0x596c0f=tinh_x_client_time(),_0x1d0e5c=await tinh_x_client_hash(_0x596c0f),_0x3b7106=await fetch(_0x263615,{'method':_0x5b2860(0x10c),'headers':{'x-client-hash':_0x1d0e5c,'x-client-time':_0x596c0f,'x-requested-with':_0x5b2860(0xa0)}}),_0x58aec2=await _0x3b7106['json'](),{reading_episode:_0x4138cd}=_0x58aec2[_0x5b2860(0x99)],_0x79727c=[];for(const [_0x5e47b9,_0x981f6f]of _0x4138cd['pages'][_0x5b2860(0x100)]()){_0x79727c[_0x5b2860(0xe0)](_0x981f6f);}if(_0x79727c[_0x5b2860(0x10b)]>0x0){downloading_total=_0x79727c[_0x5b2860(0x10b)];const _0x456fd4=create_download_icon();_0x456fd4[_0x5b2860(0xc3)](_0x5b2860(0xc0),async()=>{const _0x111ed7=_0x5b2860;downloading_current=0x0;const _0x184193=_0x79727c[_0x111ed7(0x111)]((_0x12d048,_0x4dfcf9)=>()=>download_not_encrypted(_0x12d048,_0x4dfcf9));await throttlePromises(_0x184193,0x2);});}},download_pixiv_store=async()=>{const _0x1c66ad=a0_0x596558,_0x454d98=document['location'][_0x1c66ad(0x109)],_0x47fa7a=new URL(_0x454d98)['searchParams'],_0x2a26e1=_0x47fa7a[_0x1c66ad(0xb5)]('cgi'),_0x4f70ce=_0x47fa7a[_0x1c66ad(0xb5)](_0x1c66ad(0xd6)),_0x883491=await fetch(_0x2a26e1+_0x1c66ad(0xd0)+_0x4f70ce+_0x1c66ad(0xc6)+Date[_0x1c66ad(0xcc)]()),_0x3cd09e=await _0x883491['text'](),_0x349d77=new XMLParser(),_0x189917=_0x349d77[_0x1c66ad(0xde)](_0x3cd09e),_0x55bda3=_0x189917[_0x1c66ad(0x9f)]['Content'],_0x1c1e0d=await fetch(_0x2a26e1+_0x1c66ad(0x106)+_0x55bda3+_0x1c66ad(0xc9)+Date['now']()),_0x57a358=await _0x1c1e0d[_0x1c66ad(0x10a)](),_0x422c9d=_0x349d77[_0x1c66ad(0xde)](_0x57a358),{TotalPage:_0x5d265a,Scramble:{Width:_0x4230f1,Height:_0x3a8ccc}}=_0x422c9d[_0x1c66ad(0xdc)],_0x2a5dce=Number[_0x1c66ad(0xc8)](_0x5d265a,0xa),_0x2667b6=Number['parseInt'](_0x4230f1,0xa),_0x4f3999=Number[_0x1c66ad(0xc8)](_0x3a8ccc,0xa),_0x3be335=new Date(),_0x4af19d=_0x3be335[_0x1c66ad(0xe8)](),_0x3c1534=String(_0x3be335[_0x1c66ad(0xe7)]()+0x1)[_0x1c66ad(0xef)](0x2,'0'),_0x39a72b=String(_0x3be335[_0x1c66ad(0xd4)]())[_0x1c66ad(0xef)](0x2,'0'),_0x44c41f=String(_0x3be335[_0x1c66ad(0xf5)]())[_0x1c66ad(0xef)](0x2,'0'),_0x5ba8dd=String(_0x3be335['getMinutes']())['padStart'](0x2,'0'),_0x4f151a=String(_0x3be335[_0x1c66ad(0xc7)]())[_0x1c66ad(0xef)](0x2,'0'),_0x326d54=_0x4af19d+'-'+_0x3c1534+'-'+_0x39a72b+'T'+_0x44c41f+':'+_0x5ba8dd+':'+_0x4f151a;if(_0x2a5dce>0x0){downloading_total=_0x2a5dce;const _0x4cc0d0=create_download_icon();_0x4cc0d0['addEventListener'](_0x1c66ad(0xc0),async()=>{const _0x16e96a=_0x1c66ad;downloading_current=0x0;const _0x598213=Array(_0x2a5dce)[_0x16e96a(0xeb)](0x0),_0x35b0df=_0x598213[_0x16e96a(0x111)]((_0x4c10c9,_0x35f315)=>async()=>{const _0xf919da=_0x16e96a,_0x590168=(''+_0x35f315)[_0xf919da(0xef)](0x4,'0')+'.xml',_0x4023f6=await fetch(_0x2a26e1+_0xf919da(0xf4)+_0x590168+_0xf919da(0x9d)+_0x55bda3+_0xf919da(0xc6)+Date[_0xf919da(0xcc)]()),_0x1d158c=await _0x4023f6[_0xf919da(0x10a)](),_0x47d112=_0x349d77[_0xf919da(0xde)](_0x1d158c),_0x2458c0=_0x47d112['Page'][_0xf919da(0xee)],_0xef0499=_0x2458c0[_0xf919da(0x105)](',')[_0xf919da(0x111)](_0x2aea70=>Number[_0xf919da(0xc8)](_0x2aea70,0xa));await draw_scramble({'scramble_list':_0xef0499,'cgi':_0x2a26e1,'page_index':_0x35f315,'param_for_api':_0x55bda3,'scramble_w':_0x2667b6,'scramble_h':_0x4f3999});});await throttlePromises(_0x35b0df,0x2);});}},h_drawImage=(_0x2149ea,_0x3cf149,_0x21a82a,_0x214c0e,_0x4b6991,_0x4fd41c,_0x323dab,_0xa9abed)=>{const _0x37f661=a0_0x596558;if(_0x21a82a<=0x0||_0x214c0e<=0x0)return;_0x3cf149[_0x37f661(0x92)](_0x2149ea,_0x4b6991,_0x4fd41c,_0x21a82a,_0x214c0e,_0x323dab,_0xa9abed,_0x21a82a,_0x214c0e);},draw_scramble=async({scramble_list:_0x16a72e,cgi:_0x2c8acf,page_index:_0x230793,param_for_api:_0x433636,scramble_w:_0xef8e35,scramble_h:_0xbfec3b})=>{const _0x589688=a0_0x596558,_0x547a04=0x8,_0x3da1ef=(''+_0x230793)[_0x589688(0xef)](0x4,'0')+_0x589688(0xab),_0xd9b678=await fetch(_0x2c8acf+_0x589688(0xf9)+_0x3da1ef+_0x589688(0x9d)+_0x433636+_0x589688(0xc6)+Date['now']()),_0x5dede1=await _0xd9b678[_0x589688(0xfa)](),_0x588656=window[_0x589688(0xdb)]||window[_0x589688(0x110)],_0x59b147=_0x588656[_0x589688(0xd1)](_0x5dede1);let _0x583802=new Image();_0x583802['onload']=async()=>{const _0x522a5b=_0x589688,_0xa45c04={'width':Number[_0x522a5b(0xc8)](_0x583802[_0x522a5b(0x9c)],0xa),'height':Number['parseInt'](_0x583802[_0x522a5b(0xba)],0xa)},_0x37c084=document['createElement'](_0x522a5b(0xc5));_0x37c084[_0x522a5b(0xa7)]=_0xa45c04[_0x522a5b(0xa7)],_0x37c084[_0x522a5b(0xa4)]=_0xa45c04[_0x522a5b(0xa4)];const _0x2c0230=((_0xa45c04[_0x522a5b(0xa7)]/_0xef8e35|0x0)/_0x547a04|0x0)*_0x547a04,_0x46156d=((_0xa45c04['height']/_0xbfec3b|0x0)/_0x547a04|0x0)*_0x547a04,_0x29d6d7=_0x2c0230*_0xef8e35,_0x5f25f4=_0x46156d*_0xbfec3b,_0x3de993=_0x37c084[_0x522a5b(0xe6)]('2d');h_drawImage(_0x583802,_0x3de993,_0xa45c04[_0x522a5b(0xa7)]-_0x29d6d7,_0x5f25f4,_0x29d6d7,0x0,_0x29d6d7,0x0),h_drawImage(_0x583802,_0x3de993,_0xa45c04[_0x522a5b(0xa7)],_0xa45c04[_0x522a5b(0xa4)]-_0x5f25f4,0x0,_0x5f25f4,0x0,_0x5f25f4);for(let _0x365b72=0x0;_0x365b72<_0xbfec3b;++_0x365b72){for(let _0x299cb6=0x0;_0x299cb6<_0xef8e35;++_0x299cb6){const _0x228ae4=_0x16a72e[_0x365b72*_0xef8e35+_0x299cb6],_0x4faa37=_0x228ae4/_0xef8e35|0x0,_0x49be75=_0x228ae4-_0x4faa37*_0xef8e35,_0x116445=_0x49be75*_0x2c0230,_0xb2cfc6=_0x4faa37*_0x46156d,_0x4b16be=_0x299cb6*_0x2c0230,_0x294332=_0x365b72*_0x46156d;h_drawImage(_0x583802,_0x3de993,_0x2c0230,_0x46156d,_0x116445,_0xb2cfc6,_0x4b16be,_0x294332);}}_0x37c084[_0x522a5b(0x101)](_0x414124=>{const _0x456b9b=_0x522a5b;saveAs(_0x414124,(''+(_0x230793+0x1))['padStart'](0x3,'0')+_0x456b9b(0xcb)),downloading_current+=0x1,update_status();},_0x522a5b(0x97),0.97);},_0x583802[_0x589688(0xc4)]=_0x59b147;};((async()=>{const _0x964d3c=a0_0x596558,_0x1a1930=document[_0x964d3c(0xa1)][_0x964d3c(0x109)];_0x1a1930[_0x964d3c(0xfb)](_0x964d3c(0xb8))?await download_pixiv_store():await download_pixiv();})());